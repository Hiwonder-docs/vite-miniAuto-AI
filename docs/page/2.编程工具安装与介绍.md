# 2. Arduino环境搭建

## 2.1 Arduino IDE安装及界面介绍

### 2.1.1 Arduino IDE安装方法

Arduino IDE 是一款专门为 Arduino 单片机而设计的软件，功能强大。无论是哪个版本，其安装过程都是相同的，本节以 Arduino-2.2.1 的 windows 版软件为例进行讲解：

> [!NOTE]
>
> **Mac版安装方法可在本节目录中查看。**

1)  在本文档同路径下找到ArduinoIDE的安装包，如下所示，双击打开。（若想下载最新版软件，可通过arduino网"[**https://www.arduino.cc/en/software**](https://www.arduino.cc/en/software)"进行下载）

    <img class="common_img" src="../_static/media/chapter_2/section_1/image1.png"  />

2)  点击**"我同意"**，进入安装。

<img class="common_img" src="../_static/media/chapter_2/section_1/image2.png"   />

3)  选择默认勾选选项即可，点击"**下一步**"，进入下一步操作。

<img class="common_img" src="../_static/media/chapter_2/section_1/image3.png"   />

4)  点击"**浏览**"选择安装的路径，然后点击"**安装**"开始安装。

<img class="common_img" src="../_static/media/chapter_2/section_1/image4.png"   />

5)  等待软件安装完成。

<img class="common_img" src="../_static/media/chapter_2/section_1/image5.png"   />

> [!NOTE]
>
> **安装过程如果提示需要芯片驱动的安装，请勾选"始终信任来自Arduino LLC的软件（A）"，然后点击"安装"即可。**

6)  安装完成后，点击**"完成"**。

<img class="common_img" src="../_static/media/chapter_2/section_1/image6.png"   />

### 2.1.2 界面分布介绍 

Arduino IDE 的主界面如下图，可分为5个区域：

<img class="common_img" src="../_static/media/chapter_2/section_1/image7.png"   />

1.  **菜单栏**： 负责Arduino IDE相关设置工作。

| **图标**                                                     | **功能**                                             |
| ------------------------------------------------------------ | ---------------------------------------------------- |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image8.png"  /> | 可以新建或打开项目文件，也可以对界面进行首选项设置   |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image9.png"  /> | 编辑选项，可对代码进行注释、缩进、查找等文本编辑     |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image10.png"  /> | 项目选项，对整个项目进行设置，编译运行、添加库文件等 |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image11.png"  /> | 工具选项，可以选择开发板和端口以及获得开发板信息等   |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image12.png"  /> | 帮助选项，帮助用户入门，常见问题解决等               |

2.  **工具栏**：项目相关的一些工具，包括编译程序、下载程序、串口监视器等工具。

| **图标**                                                     | **功能**                                            |
| ------------------------------------------------------------ | --------------------------------------------------- |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image13.png"  /> | 校验，验证一个程序是否编写无误，若无误则编译该项目  |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image14.png"  /> | 下载，下载程序到 Arduino 控制器上                   |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image15.png"  /> | 调试，部分开发板可以通过Arduino IDE实时调试         |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image16.png"  /> | 选择开发板，可以选择不同的开发板进行项目开发        |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image17.png"  /> | 串口绘图仪，可以将打印到Arduino串口的数据绘制成图表 |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image18.png"  /> | 串口监视器，打印串口信息                            |

3.  **编辑区**：编辑代码的区域。

4.  **状态栏**：显示当前编辑器的一些状态，例如代码的行列、开发板的信息等。

5.  **侧边栏**：Arduino IDE的核心，负责显示工作文件夹、代码调试、库文件安装等。

| **图标**                                                     | **功能**                         |
| ------------------------------------------------------------ | -------------------------------- |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image19.png"  /> | 项目文件夹，显示当前项目的文件。 |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image20.png"  /> | 开发板管理器，添加开发板工具包。 |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image21.png"  /> | 库管理，添加或删除程序的库文件。 |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image22.png"  /> | 调试，对项目实时调试。           |
| <img class="common_img" src="../_static/media/chapter_2/section_1/image23.png"  /> | 搜索，可搜索或替换代码或变量。   |

## 2.2 Arduino IDE使用说明

### 2.2.1 Arduino IDE界面设置

1)  修改中文界面：在Arduino IDE界面选择"**File**"->" **Preferences**"，在弹出的窗口中"**language**"选项栏中，选择切换为中文，随后点击"**OK**"即可。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image1.png"  />

2)  我们可以通过选择"**文件->首选项**"在弹出的窗口下修改项目文件路径、编辑器文字大小、颜色主题等设置。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image2.png"  />

* **Arduino程序下载**

1)  这里我们以一个打印"**hiwonder**"字样的例程为例进行说明。在本文档同路径下的"**Demo**"文件夹中双击打开"**Demo.ino**"的示例程序。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image3.png"  />

2)  将ESP32核心板通过数据线连接至电脑。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image4.png"  width="800px" />

3)  在"**选择开发板**"选项中找到Arduino对应的开发板。（**COM口不唯一，我们可以通过电脑的设备管理中查看COM号，此处以COM6为例**）

    <img class="common_img" src="../_static/media/chapter_2/section_2\image5.png"  />

4)  点击<img  src="../_static/media/chapter_2/section_2\image6.png"  class="inline-icon"/>按钮可对程序进行编译，可以验证程序是否存在语法错误等问题。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image7.png"  />

5)  编译成功后，再点击<img  src="../_static/media/chapter_2/section_2\image8.png"  class="inline-icon"/>按钮会将程序上传到ESP32核心板上。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image9.png"  />

6)  上传完成后，点击<img   src="../_static/media/chapter_2/section_2\image10.png"  class="inline-icon"/>打开串口监视器，我们可以看到在串口监视器中打印出了"hiwonder"字样。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image11.png"  />

### 2.2.2 库文件导入

运行程序需要导入必要的`u8g2`、`LeArm_Kinematics_lib`库文件，我们可以参考下面的方法：（后文以`u8g2`库为例演示库文件的导入步骤）

1)  在Arduino IDE界面选择"**项目->导入库->添加.ZIP库**"。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image12.png"  />

2)  在弹出的窗口中找到`u8g2.zip`（库文件压缩包已放在该文档同目录下的"**ArduinoIDE安装包**"文件夹下），点击打开。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image13.png"  />

3)  弹出如下提示，则表示库文件安装完成。

    <img class="common_img" src="../_static/media/chapter_2/section_2\image14.png"  />

